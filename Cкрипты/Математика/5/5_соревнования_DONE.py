import random

# Генерируем вероятности (одинаковые для выигрыша и проигрыша)
prob_win_loss = random.randint(1, 4)  # 0.35 - 0.45
fl_prob_win_loss = float(f'0.{prob_win_loss}')

# Вероятность ничьей
prob_draw = round(1 - 2 * fl_prob_win_loss, 2)

# Требуемое количество очков всегда равно 4 (победа + ничья = 3 + 1 = 4)
required_points = 4

# Вычисляем вероятность прохода в следующий круг
# Нужно найти все комбинации, которые дают >= 4 очков

prob_pass = 0

# Выигрыш + выигрыш = 6 очков
prob_pass += fl_prob_win_loss * fl_prob_win_loss

# Выигрыш + ничья = 4 очка
prob_pass += fl_prob_win_loss * prob_draw

# Ничья + выигрыш = 4 очка
prob_pass += prob_draw * fl_prob_win_loss

# Выигрыш + проигрыш = 3 очка (НЕ проходит)
# Проигрыш + выигрыш = 3 очка (НЕ проходит)
# Ничья + ничья = 2 очка (НЕ проходит)
# Ничья + проигрыш = 1 очко (НЕ проходит)
# Проигрыш + ничья = 1 очко (НЕ проходит)
# Проигрыш + проигрыш = 0 очков (НЕ проходит)

right_answer = round(prob_pass, 2)

text = f"""
Чтобы пройти в следующий круг соревнований, футбольной команде нужно набрать хотя бы {required_points} очка в двух играх. 
Если команда выигрывает, она получает 3 очка, в случае ничьей — 1 очко, если проигрывает — 0 очков. 
Найдите вероятность того, что команде удастся выйти в следующий круг соревнований. 
Считайте, что в каждой игре вероятности выигрыша и проигрыша одинаковы и равны {fl_prob_win_loss}.
"""

text_of_solve = f"""
Обозначим:
p = {fl_prob_win_loss} — вероятность выигрыша
q = {fl_prob_win_loss} — вероятность проигрыша  
r = {prob_draw} — вероятность ничьей (r = 1 - 2p)

Нужно набрать хотя бы {required_points} очка.

Рассмотрим все возможные комбинации результатов двух игр:

Благоприятные исходы (≥ {required_points} очков):
• выигрыш + выигрыш = 6 очков, вероятность: {fl_prob_win_loss} × {fl_prob_win_loss} = {round(fl_prob_win_loss * fl_prob_win_loss, 4)}
• выигрыш + ничья = 4 очка, вероятность: {fl_prob_win_loss} × {prob_draw} = {round(fl_prob_win_loss * prob_draw, 4)}
• ничья + выигрыш = 4 очка, вероятность: {prob_draw} × {fl_prob_win_loss} = {round(prob_draw * fl_prob_win_loss, 4)}

Неблагоприятные исходы (< {required_points} очков):
• выигрыш + проигрыш = 3 очка
• проигрыш + выигрыш = 3 очка
• ничья + ничья = 2 очка
• ничья + проигрыш = 1 очко
• проигрыш + ничья = 1 очко
• проигрыш + проигрыш = 0 очков

Вероятность прохода в следующий круг равна сумме вероятностей всех благоприятных исходов:
P = {round(fl_prob_win_loss * fl_prob_win_loss, 4)} + {round(fl_prob_win_loss * prob_draw, 4)} + {round(prob_draw * fl_prob_win_loss, 4)} = {right_answer}

Ответ: {right_answer}
"""

# выводы
print(text)
print(right_answer)
print('__________________________')
print(text_of_solve)